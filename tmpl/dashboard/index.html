<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Dashboard面板</title>
    <link rel="stylesheet" href="/assets/css/lib.css">
    <link rel="stylesheet" href="/assets/css/app.css">
    <script src="/assets/js/lib.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.2.1/echarts.js"></script>
</head>
<body>

<nav style="padding: 5px;">
    <div class="nav-wrapper">
        <div class="col s12">
            <a href="/" class="breadcrumb"> Oh My RSS </a>
            <a href="#!" class="breadcrumb"> 数据报表 </a>
        </div>
    </div>
</nav>

<div>
    <div id="uvTrend" style="width: 96%; height:400px; margin: 10px auto;"></div>

    <!--
    <div id="referTrend" style="width: 90%; height:400px;"></div>
    -->

    <div id="referPie" style="width: 96%; height: 400px; margin: 10px auto;"></div>
</div>

<script>
    const chartUvTrend = echarts.init(document.getElementById('uvTrend'));
    const chartReferPie = echarts.init(document.getElementById('referPie'));

    function renderChart() {
        $.ajax({
            type: "GET",
            url: "/api/dashboard/uv",
            dataType: 'json',
            success: function (data) {
                chartUvTrend.setOption(data);
            }
        });

        $.ajax({
            type: "GET",
            url: "/api/dashboard/refer/pie",
            dataType: 'json',
            success: function (data) {
                chartReferPie.setOption(data);
            }
        });
    }


    renderChart();
</script>
</body>
</html>